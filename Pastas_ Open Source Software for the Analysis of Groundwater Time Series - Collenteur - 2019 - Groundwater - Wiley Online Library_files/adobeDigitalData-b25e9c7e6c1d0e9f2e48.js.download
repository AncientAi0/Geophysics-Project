(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){var n=a(79);e.exports=function _defineProperty(e,t,a){return(t=n(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},e.exports.__esModule=!0,e.exports.default=e.exports},291:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return l}));var n=a(193),r=a.n(n),i=a(10),o=a.n(i),s=a(11),c=a.n(s);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l=function(){function AdobeDigitalData(){var e=this;o()(this,AdobeDigitalData),this.selectors={acdlLinks:"a[data-acdl-event], button[data-acdl-event], input[data-acdl-event]"},this.elements={pageObj:null,updatedACDL:null,acdlLinks:null},this.variables={isFieldsValid:!0},this.eTOCEvents={successCTA:function successCTA(){e.pushToACDL({event:"alert-signup-success",eTOC:{name:"journal alert cta"}})},submitForm:function submitForm(){e.pushToACDL({event:"alert-signup-submit",eTOC:{name:"alert simple sign-up form"}})},requestVerificationShown:function requestVerificationShown(){e.pushToACDL({event:"request-verification-shown",eTOC:{name:"alert simple sign-up form"}})},requestVerification:function requestVerification(){e.pushToACDL({event:"request-verification",eTOC:{name:"alert simple sign-up form"}})},contactSupport:function contactSupport(){e.pushToACDL({event:"contact-customer-service",eTOC:{name:"alert simple sign-up form"}})}},this.handleElementClicked=function(t){var a=t.target.getAttribute("data-ajax");if(!a&&t.preventDefault(),"A"===t.currentTarget.nodeName){var n=t.currentTarget.getAttribute("href"),r=t.currentTarget.getAttribute("acdl-redirect");e.getAttributes(t),"true"===r&&(window.location.href=n)}else if(("BUTTON"===t.currentTarget.nodeName||"INPUT"===t.currentTarget.nodeName)&&"submit"===t.currentTarget.type){var i=t.currentTarget.closest("form"),o=null==i?void 0:i.querySelectorAll('input[required], input[type="checkbox"][required], select[required]');if(null==i||i.reportValidity(),o&&e.handleFieldsValidation(o),!e.variables.isFieldsValid)return;e.getAttributes(t),!a&&(null==i||i.submit())}},this.handleFieldsValidation=function(t){t.forEach((function(t){e.variables.isFieldsValid=!("select"===t.tagName.toLowerCase()&&0===t.selectedIndex||"input"===t.tagName.toLowerCase()&&"checkbox"===t.type.toLowerCase()&&!t.checked||"input"===t.tagName.toLowerCase()&&""===t.value.trim())}))},this.getAttributes=function(t){var a=t.currentTarget.attributes,n={};Array.from(a).filter((function(e){return e.name.startsWith("data-acdl-")})).forEach((function(e){var t=e.name.split("--");if("data-acdl-event"===t[0])n.event=e.value;else{var a=t[0].split("-")[2];if("etoc"===a&&(a="eTOC"),n[a]||(n[a]={}),t.length>2){var r=t.slice(1),i=r.pop();r.reduce((function(e,t){return e[t]||(e[t]={}),e[t]}),n[a])[i]=e.value}else{var o=t[1];n[a][o]=e.value}}})),e.pushToACDL(n)},window.adobeDataLayer&&(this.getOsanoConsent(),this.setElements(),this.eventListeners())}return c()(AdobeDigitalData,[{key:"setElements",value:function setElements(){this.elements.acdlLinks=document.querySelectorAll(this.selectors.acdlLinks)}},{key:"eventListeners",value:function eventListeners(){var e,t=this;null===(e=this.elements.acdlLinks)||void 0===e||e.forEach((function(e){e.addEventListener("click",t.handleElementClicked)}))}},{key:"ajaxPageLoad",value:function ajaxPageLoad(e){var t;this.elements.updatedACDL=this.getUpdatedACDL(e),window.adobeDataLayer.push({event:"page-load",search:_objectSpread({},null===(t=this.elements.updatedACDL)||void 0===t?void 0:t.search)})}},{key:"changeTabsLoad",value:function changeTabsLoad(e){this.elements.pageObj=window.adobeDataLayer.getState().page,e.target.closest(".citation-search__tab")&&(this.elements.pageObj["secondary-section"]="citation search"),e.target.closest(".adv-search__tab")&&(this.elements.pageObj["secondary-section"]="advanced"),window.adobeDataLayer.push({event:"page-load",page:_objectSpread({},this.elements.pageObj)})}},{key:"getUpdatedACDL",value:function getUpdatedACDL(e){try{var t=(new DOMParser).parseFromString(e,"text/html").getElementById("adobeDigitalData").innerHTML,a=t.indexOf("{"),n=t.lastIndexOf("}")+1;return JSON.parse(t.substring(a,n))}catch(e){return console.error("Error occurred while parsing adobeDigitalData: ".concat(e)),null}}},{key:"getOsanoConsent",value:function getOsanoConsent(){var e=!1,t=null,a={event:"page-load",user:{}},n=setInterval((function(){var r,i,o,s;(window.Osano&&window.Osano("onInitialized",(function(a){e=!0,t=a})),e)&&(clearInterval(n),a.user["consent-osano"]="analytics: ".concat(null===(r=t)||void 0===r?void 0:r.ANALYTICS," | marketing: ").concat(null===(i=t)||void 0===i?void 0:i.MARKETING," | personalization: ").concat(null===(o=t)||void 0===o?void 0:o.PERSONALIZATION," | essential: ").concat(null===(s=t)||void 0===s?void 0:s.ESSENTIAL),window.adobeDataLayer.push(a))}),50)}},{key:"pushToACDL",value:function pushToACDL(e){window.adobeDataLayer.push(e)}}]),AdobeDigitalData}()}}]);
//# sourceMappingURL=adobeDigitalData-b25e9c7e6c1d0e9f2e48.js.map